(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(33),c=n.n(r),s=n(12),o=n(11),i=n.n(o),u=n(16),l=n(24),d=n(35),j=n(14),p=n(7),b=n(39),h=n(2),m=function(e){var t=e.isAuthenticated,n=e.component,a=Object(b.a)(e,["isAuthenticated","component"]);return Object(h.jsx)(j.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(h.jsx)(n,Object(p.a)({},e)):Object(h.jsx)(j.a,{to:"/auth/login"})}}))},f=function(e){var t=e.isAuthenticated,n=e.component,a=Object(b.a)(e,["isAuthenticated","component"]);return Object(h.jsx)(j.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return t?Object(h.jsx)(j.a,{to:"/"}):Object(h.jsx)(n,Object(p.a)({},e))}}))},O="[Auth] Login",x="[Auth] Logout",v="[UI] Set Error",g="[UI] Remove Error",y="[Notes] new note",_="[Notes] set active note",w="[Notes] load notes",N="[Notes] update note",k="[Notes] delete note",C="[Notes] logout cleaning",L=n(31);n(82),n(83);L.a.initializeApp({apiKey:"AIzaSyCVZ_6h4cdsryrutgGkMbM_t2tCgMfriPw",authDomain:"journal-app-8f805.firebaseapp.com",projectId:"journal-app-8f805",storageBucket:"journal-app-8f805.appspot.com",messagingSenderId:"974816076821",appId:"1:974816076821:web:39f661d05d8812e4c11a1c"});var E=new L.a.auth.GoogleAuthProvider,S=L.a.firestore(),A=n(22),I=n.n(A),P=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.collection("".concat(t,"/journal/notes")).get();case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(p.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),n.append("upload_preset","react-journal"),e.next=5,fetch("https://api.cloudinary.com/v1_1/dgq0tyl3s/image/upload",{method:"POST",body:n});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("Error al cargar la imagen.");case 8:return e.next=10,a.json();case 10:return r=e.sent,e.abrupt("return",r.secure_url);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){return{type:_,payload:Object(p.a)({id:e},t)}},B=function(e,t){return{type:y,payload:{id:e,note:Object(p.a)({id:e},t)}}},T=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:a=t.sent,n(z(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return{type:w,payload:{notes:e}}},F=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.uid,e.imageUrl||delete e.imageUrl,delete(c=Object(p.a)({},e)).id,t.prev=4,t.next=7,S.doc("/".concat(r,"/journal/notes/").concat(e.id)).update(c);case 7:n(H(e.id,e)),I.a.fire({title:"Nota guardada.",icon:"success"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0),I.a.fire({title:"Nota NO guardada.",icon:"error"});case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}()},H=function(e,t){return{type:N,payload:{id:e,note:Object(p.a)({},t)}}},M=function(e){return{type:k,payload:{id:e}}},W=function(e,t,n){return{type:O,payload:{displayName:t,uid:e,email:n}}},G=function(){return{type:x}},R=n(69),J=n.n(R),V=function(e){var t=e.date,n=e.id,a=e.title,r=e.body,c=e.imageUrl,o=new J.a(t),i=Object(s.b)();return Object(h.jsxs)("div",{className:"journal__journal-entry",onClick:function(){i(D(n,{title:a,body:r,imageUrl:c,date:t}))},children:[Object(h.jsxs)("div",{className:"journal__journal-entry-date",children:[Object(h.jsx)("h4",{children:o.format("dddd")}),Object(h.jsx)("h4",{children:o.format("Do")})]}),Object(h.jsxs)("div",{className:"journal__journal-entry-text",children:[Object(h.jsx)("h4",{children:a}),Object(h.jsx)("p",{children:r||"Body"})]}),c?Object(h.jsx)("div",{className:"journal__journal-entry-img",style:{backgroundSize:"cover",backgroundImage:"url(".concat(c,")")}}):Object(h.jsx)("div",{className:"journal__journal-entry-img",style:{backgroundSize:"cover",backgroundImage:"url(https://cdn.shopify.com/s/files/1/0740/0383/files/cute-3106473__340_2048x2048.jpg?v=1541113625)"}})]})},X=function(){var e=Object(s.c)((function(e){return e.notes})).notes;return Object(h.jsx)(h.Fragment,{children:e.map((function(e){return Object(h.jsx)(V,Object(p.a)({},e),e.id)}))})},Z=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})).name;return Object(h.jsxs)("aside",{className:"jorunal__aside",children:[Object(h.jsxs)("header",{className:"journal__header-aside",children:[Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)("svg",{width:"33",height:"30",viewBox:"0 0 33 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M16.5 1.61804L19.729 11.5557L19.8412 11.9012H20.2045H30.6536L22.2001 18.0431L21.9062 18.2566L22.0184 18.6021L25.2474 28.5398L16.7939 22.3979L16.5 22.1844L16.2061 22.3979L7.7526 28.5398L10.9816 18.6021L11.0938 18.2566L10.7999 18.0431L2.34641 11.9012H12.7955H13.1588L13.271 11.5557L16.5 1.61804Z",stroke:"white"})}),Object(h.jsx)("p",{style:{marginLeft:"3px"},children:t})]}),Object(h.jsx)("button",{className:"btn",style:{opacity:.5},onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.auth().signOut();case 3:t(G()),t({type:C}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(h.jsxs)("div",{onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.auth,c={title:"",body:"",date:(new Date).getTime()},e.next=4,S.collection("".concat(r.uid,"/journal/notes")).add(c);case 4:s=e.sent,t(D(s.id,c)),t(B(s.id,c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},className:"journal__new-entry",children:[Object(h.jsx)("i",{className:"fa fa-calendar-plus fa-5x"}),Object(h.jsx)("p",{style:{fontSize:"0.8rem",margin:"5px"},children:"New entry"})]}),Object(h.jsx)("div",{className:"journal__entries",children:Object(h.jsx)(X,{})})]})},q=n.p+"static/media/star.afd7c7ad.svg",K=function(){return Object(h.jsx)("div",{className:"journal__content",children:Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("img",{src:q,alt:"star"}),Object(h.jsx)("p",{children:"Select something or create an new entry!"})]})})},Q=function(){var e=Object(s.c)((function(e){return e.notes})).active,t=Object(s.b)();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("header",{className:"journal__app-bar",children:[Object(h.jsx)("p",{children:"12 de Abril de 2021"}),Object(h.jsx)("input",{type:"file",id:"imageSelector",accept:"image/png, image/jpeg, image/jpg",style:{display:"none"},onChange:function(e){if(e.target.files.length>0){var n=e.target.files[0];t(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().notes.active,I.a.fire({icon:"info",title:"Cargando...",text:"Espera...",allowOutsideClick:!1,showCloseButton:!1,showConfirmButton:!1,onBeforeOpen:function(){I.a.showLoading()}}),t.next=4,U(e);case 4:c=t.sent,r.imageUrl=c,n(F(r)),n(H(r.id,r));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(n))}}}),Object(h.jsxs)("div",{className:"journal__actions",children:[Object(h.jsx)("button",{className:"btn",onClick:function(){document.getElementById("imageSelector").click()},children:"Picture"}),Object(h.jsx)("button",{className:"btn",onClick:function(){t(F(e))},children:"Save"})]})]})})},Y=n(37),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),r=n[0],c=n[1],s=function(e){var t=e.target,n=t.name,a=t.value;c(Object(p.a)(Object(p.a)({},r),{},Object(Y.a)({},n,a)))},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)};return{values:r,handleChange:s,resetForm:o}},ee=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.notes})).active,n=$(t),r=n.values,c=n.handleChange,o=n.resetForm,l=r.title,d=r.body;Object(a.useEffect)((function(){t.id!==r.id&&o(t)}),[o,t,r]),Object(a.useEffect)((function(){e(D(r.id,r))}),[r,e]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Q,{}),Object(h.jsxs)("div",{className:"notes__screen",children:[Object(h.jsxs)("div",{className:"notes__form",children:[Object(h.jsx)("input",{type:"text",placeholder:"Some awesome title",autoComplete:"off",className:"notes__input",name:"title",value:l,onChange:c}),Object(h.jsx)("textarea",{className:"notes__text-area",placeholder:"What happend today",name:"body",value:d,onChange:c})]}),Object(h.jsx)("div",{className:"notes__picture",style:{backgroundImage:"url(".concat(t.imageUrl&&t.imageUrl,")"),backgroundSize:"cover"}})]}),Object(h.jsx)("div",{className:"btn btn-secondary",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().notes.active.id,r=n().auth.uid,e.prev=2,e.next=5,S.doc("".concat(r,"/journal/notes/").concat(a)).delete();case 5:t(M(a)),I.a.fire({icon:"success",text:"Nota eliminada."}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),I.a.fire({icon:"error",text:"Ha ocurrido un error."});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}())},children:"Delete"})]})},te=function(){var e=Object(s.c)((function(e){return e.notes})).active;return Object(h.jsxs)("div",{className:"journal__main-content",children:[Object(h.jsx)(Z,{}),Object(h.jsx)("main",{children:e?Object(h.jsx)(ee,{}):Object(h.jsx)(K,{})})]})},ne=n(38),ae=n.n(ne),re=n.p+"static/media/Google__Logo.330a2dc7.svg",ce=function(){var e=$({email:"",password:""}),t=e.values,n=e.handleChange,a=t.email,r=t.password,c=Object(s.b)();return Object(h.jsxs)("div",{className:"auth__fade",children:[Object(h.jsx)("h1",{className:"title mb-5",children:"Login"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ae.a.isEmail(a)&&c(function(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(a){var r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L.a.auth().signInWithEmailAndPassword(e,t);case 3:r=n.sent,c=r.user,a(W(c.uid,c.displayName,c.email)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),I.a.fire({icon:"error",title:"Oops...",text:"Ocurrio un error inesperado, vueve a intentarlo. (".concat(n.t0.message,")")});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(a,r))},children:[Object(h.jsx)("input",{className:"auth__input ",type:"text",placeholder:"Email",autoComplete:"off",name:"email",value:a,onChange:n}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",name:"password",value:r,onChange:n}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-1",children:"Login"}),Object(h.jsx)("p",{className:"text-center text-primary bold mt-5 mb-1",children:"Login with social networks"}),Object(h.jsxs)("div",{className:"google-btn",onClick:function(){c((function(e){L.a.auth().signInWithPopup(E).then((function(t){var n=t.user;e(W(n.uid,n.displayName,n.email))})).catch((function(e){I.a.fire({icon:"error",title:"Oops...",text:"Ocurrio un error inesperado, vueve a intentarlo. (".concat(e.message,")")})}))}))},children:[Object(h.jsx)("div",{className:"google-icon-wrapper",children:Object(h.jsx)("img",{className:"google-icon",src:re,alt:"google button"})}),Object(h.jsx)("p",{className:"btn-text",children:Object(h.jsx)("b",{children:"Sign in with google"})})]})]})]})},se=function(e){var t=e.message;return Object(h.jsx)("div",{className:"ui__error-container",children:Object(h.jsx)("p",{className:"ui__error-text",children:t})})},oe=function(e){return{type:v,payload:{message:e}}},ie=function(){return{type:g}},ue=function(){var e=Object(s.c)((function(e){return e.ui})),t=e.error,n=e.message,r=Object(s.b)();Object(a.useEffect)((function(){return function(){return r(ie())}}),[r]);var c=$({name:"",email:"",password:"",confirmPassword:""}),o=c.values,l=c.handleChange,d=o.name,j=o.email,p=o.password,b=o.confirmPassword,m=function(){return ae.a.isEmail(j)?d.trim().length<2?(r(oe("El name debe ser valido")),!1):p.trim().length<=7?(r(oe("La contrase\xf1a debe tener como m\xednimo 8 caracteres")),!1):p!==b||p.length<=5?(r(oe("Las contrase\xf1as deben coincidir")),!1):(r(ie()),!0):(r(oe("El email debe ser valido")),!1)};return Object(h.jsxs)("div",{className:"auth__fade",children:[Object(h.jsx)("h1",{className:"title mb-5",children:"Register"}),t&&Object(h.jsx)(se,{message:n}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m()&&r(function(e,t,n){return function(){var a=Object(u.a)(i.a.mark((function a(r){var c,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L.a.auth().createUserWithEmailAndPassword(e,t);case 3:return c=a.sent,s=c.user,a.next=7,s.updateProfile({displayName:n});case 7:r(W(s.uid,s.displayName,s.email)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),I.a.fire({icon:"error",title:"Oops...",text:"Ocurrio un error inesperado, vueve a intentarlo. (".concat(a.t0.message,")")});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(j,p,d))},children:[Object(h.jsx)("input",{className:"auth__input ",type:"text",placeholder:"Name",autoComplete:"off",name:"name",value:d,onChange:l}),Object(h.jsx)("input",{className:"auth__input ",type:"text",placeholder:"Email",autoComplete:"off",name:"email",value:j,onChange:l}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"Password",name:"password",value:p,onChange:l}),Object(h.jsx)("input",{className:"auth__input",type:"password",placeholder:"Confirm password",name:"confirmPassword",value:b,onChange:l}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-1",children:"Signup"})]})]})},le=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(h.jsx)("div",{className:"auth__main",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{class:"slideThree",children:[Object(h.jsx)("input",{type:"checkbox",value:n,id:"slideThree",name:"check",onChange:function(e){r(!n)}}),Object(h.jsx)("label",{for:"slideThree"})]}),Object(h.jsx)("div",{className:"auth__container",children:n?Object(h.jsx)(ue,{}):Object(h.jsx)(ce,{})})]})})},de=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),o=Object(l.a)(c,2),p=o[0],b=o[1],O=Object(s.b)();return Object(a.useEffect)((function(){L.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t?void 0:t.uid)?(O(W(t.uid,t.displayName,t.email)),O(T(t.uid)),r(!0)):r(!1),b(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[O,b,r]),p?Object(h.jsx)("h1",{children:"ESpera...(hacer loader bacano)"}):Object(h.jsx)(d.a,{children:Object(h.jsx)("div",{className:"fade",children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(f,{path:"/auth",isAuthenticated:n,component:le}),Object(h.jsx)(m,{path:"/",isAuthenticated:n,component:te}),Object(h.jsx)(j.a,{to:"/auth/login"})]})})})},je=n(25),pe=n(70),be=n(47),he={notes:[],active:null},me={error:!1,message:""},fe=Object(je.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{uid:t.payload.uid,email:t.payload.email,name:t.payload.displayName};case x:return{};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{error:!0,message:t.payload.message};case g:return{error:!1,message:""};default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(p.a)(Object(p.a)({},e),{},{active:Object(p.a)({},t.payload)});case w:return Object(p.a)(Object(p.a)({},e),{},{notes:Object(be.a)(t.payload.notes)});case y:return Object(p.a)(Object(p.a)({},e),{},{notes:[t.payload.note].concat(Object(be.a)(e.notes))});case N:return Object(p.a)(Object(p.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case k:return Object(p.a)(Object(p.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload.id}))});case C:return Object(p.a)(Object(p.a)({},e),{},{notes:[],active:null});default:return e}}}),Oe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||je.d,xe=Object(je.e)(fe,Oe(Object(je.a)(pe.a))),ve=function(){return Object(h.jsx)(s.a,{store:xe,children:Object(h.jsx)(de,{})})};n(163);c.a.render(Object(h.jsx)(ve,{}),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.b35343bc.chunk.js.map